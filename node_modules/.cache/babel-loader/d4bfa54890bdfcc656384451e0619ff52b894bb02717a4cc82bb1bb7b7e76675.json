{"ast":null,"code":"import React,{useState}from'react';import{exportToExcel,getExportSummary}from'../../../shared/utils/exportToExcel';import{Button}from'../../../shared/ui/Button';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";export const ExportButton=_ref=>{let{data,disabled=false,totalItems}=_ref;const[isExporting,setIsExporting]=useState(false);const handleExport=async()=>{if(data.length===0){return;}setIsExporting(true);try{await exportToExcel(data);// Show success message (could be replaced with toast notification)\nconst summary=getExportSummary(totalItems||data.length,data.length);console.log('Export successful:',summary);// You could add a toast notification here\n// toast.success(summary);\n}catch(error){console.error('Export failed:',error);// You could add a toast notification here\n// toast.error('Не удалось экспортировать данные');\n}finally{setIsExporting(false);}};return/*#__PURE__*/_jsx(Button,{variant:\"primary\",onClick:handleExport,disabled:disabled||isExporting,loading:isExporting,children:isExporting?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"svg\",{className:\"animate-spin -ml-1 mr-2 h-4 w-4\",fill:\"none\",viewBox:\"0 0 24 24\",children:[/*#__PURE__*/_jsx(\"circle\",{className:\"opacity-25\",cx:\"12\",cy:\"12\",r:\"10\",stroke:\"currentColor\",strokeWidth:\"4\"}),/*#__PURE__*/_jsx(\"path\",{className:\"opacity-75\",fill:\"currentColor\",d:\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"})]}),\"\\u042D\\u043A\\u0441\\u043F\\u043E\\u0440\\u0442...\"]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"svg\",{className:\"-ml-1 mr-2 h-4 w-4\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\"})}),\"\\u042D\\u043A\\u0441\\u043F\\u043E\\u0440\\u0442 \\u0432 Excel\"]})});};","map":{"version":3,"names":["React","useState","exportToExcel","getExportSummary","Button","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ExportButton","_ref","data","disabled","totalItems","isExporting","setIsExporting","handleExport","length","summary","console","log","error","variant","onClick","loading","children","className","fill","viewBox","cx","cy","r","stroke","strokeWidth","d","strokeLinecap","strokeLinejoin"],"sources":["D:/work/komus/3pl-site/src/features/inventory-table/ui/ExportButton.tsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { PlacedItemDto } from '../model/types';\r\nimport { exportToExcel, getExportSummary } from '../../../shared/utils/exportToExcel';\r\nimport { Button } from '../../../shared/ui/Button';\r\n\r\ninterface ExportButtonProps {\r\n  data: PlacedItemDto[];\r\n  disabled?: boolean;\r\n  totalItems?: number;\r\n}\r\n\r\nexport const ExportButton: React.FC<ExportButtonProps> = ({\r\n  data,\r\n  disabled = false,\r\n  totalItems,\r\n}) => {\r\n  const [isExporting, setIsExporting] = useState(false);\r\n\r\n  const handleExport = async () => {\r\n    if (data.length === 0) {\r\n      return;\r\n    }\r\n\r\n    setIsExporting(true);\r\n    \r\n    try {\r\n      await exportToExcel(data);\r\n      \r\n      // Show success message (could be replaced with toast notification)\r\n      const summary = getExportSummary(totalItems || data.length, data.length);\r\n      console.log('Export successful:', summary);\r\n      \r\n      // You could add a toast notification here\r\n      // toast.success(summary);\r\n      \r\n    } catch (error) {\r\n      console.error('Export failed:', error);\r\n      \r\n      // You could add a toast notification here\r\n      // toast.error('Не удалось экспортировать данные');\r\n      \r\n    } finally {\r\n      setIsExporting(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Button\r\n      variant=\"primary\"\r\n      onClick={handleExport}\r\n      disabled={disabled || isExporting}\r\n      loading={isExporting}\r\n    >\r\n      {isExporting ? (\r\n        <>\r\n          <svg className=\"animate-spin -ml-1 mr-2 h-4 w-4\" fill=\"none\" viewBox=\"0 0 24 24\">\r\n            <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\"></circle>\r\n            <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\r\n          </svg>\r\n          Экспорт...\r\n        </>\r\n      ) : (\r\n        <>\r\n          <svg className=\"-ml-1 mr-2 h-4 w-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\" />\r\n          </svg>\r\n          Экспорт в Excel\r\n        </>\r\n      )}\r\n    </Button>\r\n  );\r\n}; "],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,KAAQ,OAAO,CAEvC,OAASC,aAAa,CAAEC,gBAAgB,KAAQ,qCAAqC,CACrF,OAASC,MAAM,KAAQ,2BAA2B,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,CAAAC,QAAA,IAAAC,SAAA,yBAQnD,MAAO,MAAM,CAAAC,YAAyC,CAAGC,IAAA,EAInD,IAJoD,CACxDC,IAAI,CACJC,QAAQ,CAAG,KAAK,CAChBC,UACF,CAAC,CAAAH,IAAA,CACC,KAAM,CAACI,WAAW,CAAEC,cAAc,CAAC,CAAGhB,QAAQ,CAAC,KAAK,CAAC,CAErD,KAAM,CAAAiB,YAAY,CAAG,KAAAA,CAAA,GAAY,CAC/B,GAAIL,IAAI,CAACM,MAAM,GAAK,CAAC,CAAE,CACrB,OACF,CAEAF,cAAc,CAAC,IAAI,CAAC,CAEpB,GAAI,CACF,KAAM,CAAAf,aAAa,CAACW,IAAI,CAAC,CAEzB;AACA,KAAM,CAAAO,OAAO,CAAGjB,gBAAgB,CAACY,UAAU,EAAIF,IAAI,CAACM,MAAM,CAAEN,IAAI,CAACM,MAAM,CAAC,CACxEE,OAAO,CAACC,GAAG,CAAC,oBAAoB,CAAEF,OAAO,CAAC,CAE1C;AACA;AAEF,CAAE,MAAOG,KAAK,CAAE,CACdF,OAAO,CAACE,KAAK,CAAC,gBAAgB,CAAEA,KAAK,CAAC,CAEtC;AACA;AAEF,CAAC,OAAS,CACRN,cAAc,CAAC,KAAK,CAAC,CACvB,CACF,CAAC,CAED,mBACEX,IAAA,CAACF,MAAM,EACLoB,OAAO,CAAC,SAAS,CACjBC,OAAO,CAAEP,YAAa,CACtBJ,QAAQ,CAAEA,QAAQ,EAAIE,WAAY,CAClCU,OAAO,CAAEV,WAAY,CAAAW,QAAA,CAEpBX,WAAW,cACVR,KAAA,CAAAE,SAAA,EAAAiB,QAAA,eACEnB,KAAA,QAAKoB,SAAS,CAAC,iCAAiC,CAACC,IAAI,CAAC,MAAM,CAACC,OAAO,CAAC,WAAW,CAAAH,QAAA,eAC9ErB,IAAA,WAAQsB,SAAS,CAAC,YAAY,CAACG,EAAE,CAAC,IAAI,CAACC,EAAE,CAAC,IAAI,CAACC,CAAC,CAAC,IAAI,CAACC,MAAM,CAAC,cAAc,CAACC,WAAW,CAAC,GAAG,CAAS,CAAC,cACrG7B,IAAA,SAAMsB,SAAS,CAAC,YAAY,CAACC,IAAI,CAAC,cAAc,CAACO,CAAC,CAAC,iHAAiH,CAAO,CAAC,EACzK,CAAC,gDAER,EAAE,CAAC,cAEH5B,KAAA,CAAAE,SAAA,EAAAiB,QAAA,eACErB,IAAA,QAAKsB,SAAS,CAAC,oBAAoB,CAACC,IAAI,CAAC,MAAM,CAACK,MAAM,CAAC,cAAc,CAACJ,OAAO,CAAC,WAAW,CAAAH,QAAA,cACvFrB,IAAA,SAAM+B,aAAa,CAAC,OAAO,CAACC,cAAc,CAAC,OAAO,CAACH,WAAW,CAAE,CAAE,CAACC,CAAC,CAAC,iIAAiI,CAAE,CAAC,CACtM,CAAC,0DAER,EAAE,CACH,CACK,CAAC,CAEb,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}